{% extends "base.html" %}

{% block content %}




<h1> Teaching Associate  </h1>

<div class = "centre">
    <a href = "/user/signout" class = "btn btn--secondary"> Sign Out </a>
</div>

    {{ session['logged_in'] }}
    {{ session['user'] }}


    <form name="skills_form">
        <label for="skills">Select a Skill to Add:</label>

        <select name="skill" id="skills">

            {% for skill in compsci_skills %}
            <option value="{{ skill['_id'] }}">{{ skill['name'] }}</option>  <!--  -->
            {% endfor %}
        </select>
        <input type= "submit" value = "Add Skill" class= "btn">
    </form>

    <p>{{ compsci_skills }}</p>

    
    <form name="remove_skills_form">
        <label for="skills">Select a Skill to remove:</label>
        <select name="skill" id="skills">

            {% for skill in compsci_skills %}
            <option value="{{ skill['_id'] }}">{{ skill['name'] }}</option>  
            {% endfor %}
        </select>
        <input type= "submit" value = "Remove Skill" class= "btn">
    </form>


    



   
    <form name="change_password_form" method="post">
        
        <label for="new_password">New Password:</label>
        <input type= "password" name= "new_password" class="field" required>
    
        <input type="submit" value="Change Password">
    </form>

    <form name="toggle_mobile_form">
        <label for="toggle">Do You Have Mobility Issues:</label>
        <select name="toggle" id="toggles">
            <option value="no">No</option>
            <option value="yes">Yes</option>
        </select>
        <input type= "submit" value = "Toggle" class= "btn">
    </form>
    


    <body>
        <h1>Skill Set</h1>
        {% if skills %}
        <ul>
            {% for skill in skills %}
            <li>{{ skill }}</li>
            {% endfor %}
        </ul>

        {% else %}
        <p>You currently have no skills listed.</p>
        {% endif %}
    </body>

    


    <body>
        <h1>Availability</h1>
        {% if availability %}
    <table id="availability_table">
        <tr>
            <th>Start Date</th>
            <th>Start Time</th>
            <th>End Date</th>
            <th>End Time</th>
        </tr>
        {% for slot in availability %}
        <tr data-id= "{{ slot['_id'] }}">
            <td>{{ slot['start_time'].strftime('%Y-%m-%d') }}</td>
            <td>{{ slot['start_time'].strftime('%H:%M') }}</td>
            <td>{{ slot['end_time'].strftime('%Y-%m-%d') }}</td>
            <td>{{ slot['end_time'].strftime('%H:%M') }}</td>
            <td>
                <button class="delete-btn" data-id="{{ slot['_id'] }}">Remove</button>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>No availability listed.</p>
    {% endif %}
    </body>
    

    
    

    <!--Testing trying to move calendar to ta.html-->
    <div class="container-calendar">
			
        <div id="right">
            <h3 id="monthAndYear"></h3>
            <div class="button-container-calendar">
                <button id="previous"
                        onclick="previous()">
                    ‹
                </button>
                <button id="next"
                        onclick="next()">
                    ›
                </button>
            </div>
            <table class="table-calendar"
                id="calendar"
                data-lang="en">
                <thead id="thead-month"></thead>
                <!-- Table body for displaying the calendar -->
                <tbody id="calendar-body"></tbody>
            </table>

            <div class="footer-container-calendar">
                
                <label for="month">Jump To: </label>
                <!-- Dropdowns to select a specific month and year -->
                <select id="month" onchange="jump()">
                    <option value=0>Jan</option>
                    <option value=1>Feb</option>
                    <option value=2>Mar</option>
                    <option value=3>Apr</option>
                    <option value=4>May</option>
                    <option value=5>Jun</option>
                    <option value=6>Jul</option>
                    <option value=7>Aug</option>
                    <option value=8>Sep</option>
                    <option value=9>Oct</option>
                    <option value=10>Nov</option>
                    <option value=11>Dec</option>
                </select>
                <!-- Dropdown to select a specific year -->
                <select id="year" onchange="jump()"></select>
            </div>
            
        </div>
    
    </div>


    
   
    <div id="availability_form" class="modal">
        <div class="modal-content">
            <!-- x button that calls the close_form function -->
            <span class="close" onclick="close_form()">&times;</span>
            <h2>Set Availability</h2>
            <form id="availability_form_content">

                <label for="availability_date">Date:</label>
                <input type="text" id="availability_date" name="availability_date" readonly>

                <label for="startTime">Start Time:</label>
                <input type="time" id="start_time" name="start_time">

                <label for="endTime">End Time:</label>
                <input type="time" id="end_time" name="end_time">

                <input type="submit" value="Set Availability" class= "btn">
            </form>
        </div>
    </div>


    <div id="manage_availability_form" class="modal">
        <div class="modal-content">
            <!-- x button that calls the close_form function -->
            <span class="close" onclick="close_manage_availability_form()">&times;</span>
            <h2>Manage Availability</h2>
            <form id="availability_form_content">

                <label for="availability_date">Date:</label>
                <input type="text" id="manage_availability_date" name="manage_availability_date" readonly>

    
            </form>
        </div>
    </div>





    <p>User Role: {{ role }}</p>
    <body data-role="{{ role }}">



    <script>
        // This makes the Python availability_data available to JavaScript.
        let availability_data = {{ availability_data | tojson }};
    </script>


    <script src="/static/js/cal.js"></script>

    

{% endblock %}


